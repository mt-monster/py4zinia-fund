# ETF列表功能实现计划

## 1. 功能需求分析
根据参考图，ETF列表需要实现以下功能：
- 分类标签：股票/期货/债券ETF、黄金ETF、货币ETF
- 筛选标签：全部、宽基、行业、A股、QDII、期货、债券
- 成交额筛选：可输入最小值
- 搜索功能：支持按指数代码、指数名称、ETF代码、ETF名称、基金公司名称搜索
- 选择列功能
- 详细数据列：排名、跟踪指数、指数名称、ETF代码、ETF名称、基金公司、最新价、20日均成交额
- 数据更新提示
- 支持链接点击（如指数代码、ETF代码等）

## 2. 实现方案

### 2.1 后端改进
- 更新`/api/etf-list`接口，返回更详细的ETF数据结构
- 增加支持筛选和搜索的查询参数
- 生成模拟数据以匹配参考图的字段需求

### 2.2 前端改进
- 修改`openETFList()`函数，创建匹配参考图的界面
- 实现分类标签和筛选标签的切换功能
- 实现成交额筛选和搜索功能
- 实现表格数据展示，包含所有参考图中的列
- 实现表格样式匹配参考图

## 3. 具体实现步骤

### 3.1 后端实现
1. 更新`app.py`中的`etf_list`函数，返回更详细的数据结构
2. 添加查询参数支持，包括：
   - 分类筛选（category）
   - 子分类筛选（subcategory）
   - 成交额最小值（volume_min）
   - 搜索关键词（search）
3. 生成更丰富的模拟数据，包含参考图所需的所有字段

### 3.2 前端实现
1. 更新`tools.html`中的`openETFList()`函数，创建完整的ETF列表界面
2. 实现标签切换逻辑
3. 实现筛选和搜索功能
4. 设计表格样式，匹配参考图
5. 实现数据加载和展示逻辑
6. 添加数据更新提示

## 4. 数据结构设计

### 4.1 API返回数据结构
```json
{
  "etfs": [
    {
      "rank": 1,
      "index_code": "H11014",
      "index_name": "中证超短债指数",
      "etf_code": "511360",
      "etf_name": "超短债ETF",
      "fund_company": "海富通",
      "latest_price": 112.861,
      "avg_20d_volume": 268.43,
      "category": "债券ETF"
    }
  ],
  "update_time": "2026年1月9日15时30分"
}
```

### 4.2 前端界面结构
- 顶部导航区：分类标签和筛选标签
- 筛选区：成交额筛选、搜索框、搜索按钮、全部按钮
- 选项区：每指数仅显示1个ETF、选择列
- 表格区：完整的数据表格
- 数据更新提示区

## 5. 技术要点
- 使用HTML、CSS和JavaScript实现前端界面
- 使用Fetch API调用后端接口
- 实现响应式设计，确保界面美观
- 实现交互功能，如标签切换、筛选、搜索
- 模拟数据生成，确保数据格式正确

## 6. 文件修改
- `d:\codes\py4zinia\other_fund_tools\app.py`：更新ETF列表API
- `d:\codes\py4zinia\other_fund_tools\templates\tools.html`：更新ETF列表前端实现

## 7. 测试计划
- 测试标签切换功能
- 测试筛选和搜索功能
- 测试数据加载和展示
- 测试界面样式是否匹配参考图