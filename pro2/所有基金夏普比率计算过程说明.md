# 基金列表所有基金夏普比率计算过程说明

## 一、计算配置参数

| 参数名 | 值 | 说明 |
|--------|-----|------|
| 无风险利率 (Risk Free Rate) | 0.03 (3%) | 年化无风险收益率 |
| 年化交易日 (Trading Days) | 252 | 每年交易日数 |

## 二、计算公式

### 2.1 夏普比率公式
```
夏普比率 = (年化收益率 - 无风险利率) / 年化波动率
Sharpe Ratio = (Annualized Return - Risk Free Rate) / Annualized Volatility
```

### 2.2 年化收益率计算
```
总收益率 = (最新净值 - 起始净值) / 起始净值
年化收益率 = (1 + 总收益率)^(交易天数/持有天数) - 1
```

### 2.3 年化波动率计算
```
年化波动率 = 日收益率标准差 × √252
```

### 2.4 日收益率格式说明
- 数据源返回的日增长率可能是**百分比格式**（如0.65表示0.65%）
- 计算前需转换为**小数格式**（如0.0065表示0.65%）
- 转换方式：如果日收益率绝对值均值 >= 0.01，则除以100

## 三、重要修复记录

### 修复1: 净值数据排序问题 (2026-02-11)
**问题**: `get_historical_data()` 返回的数据按日期**降序**排列（最新在前），但脚本错误地将第一条作为起始净值。

**修复**: 计算前先将数据按日期**升序**排列：
```python
hist_data = hist_data.sort_values('date', ascending=True).reset_index(drop=True)
```

### 修复2: 波动率计算问题 (2026-02-11)
**问题**: 日收益率格式判断条件 `>= 1` 太严格，实际均值约0.8（百分比格式），未触发除以100转换。

**修复**: 判断条件改为 `>= 0.01`：
```python
if abs(daily_returns).mean() >= 0.01:
    daily_returns = daily_returns / 100
```

**影响**: 以001270为例，年化波动率从2041%（错误）修正为20.41%（正确）。

## 四、所有基金计算结果汇总表（修复后）

| 基金代码 | 基金名称 | 夏普(全期) | 夏普(1年) | 夏普(YTD) | 年化收益 | 年化波动 | 数据天数 |
|----------|----------|------------|-----------|-----------|----------|----------|----------|
| 001270 | 英大灵活配置混合型发起式A | 0.0436 | 0.5750 | -0.9225 | 3.89% | 20.41% | 2665 |
| 001614 | 东方区域发展混合 | 0.0326 | 0.4491 | -0.8130 | 3.87% | 26.78% | 2334 |
| 002179 | 华安事件驱动量化混合A | 0.3474 | 1.7041 | 1.9818 | 11.34% | 24.00% | 2255 |
| 002423 | 华宝标普美国消费美元 | 0.3829 | 0.1097 | -1.4668 | 10.98% | 20.84% | 2445 |
| 002611 | 博时黄金ETF联接C | 0.8360 | 2.3643 | 3.5469 | 14.07% | 13.25% | 2403 |
| 003017 | 广发中证军工ETF联接A | 0.0332 | 1.3861 | 1.1083 | 3.88% | 26.50% | 2316 |
| 004206 | 华商元亨混合A | 0.6121 | 2.2055 | 0.5230 | 13.78% | 17.62% | 2198 |
| 005550 | 汇安成长优选混合A | 0.3768 | 2.5026 | 2.7234 | 13.74% | 28.50% | 1969 |
| 006105 | 宏利印度股票(QDII)A | 0.1272 | -0.3915 | -2.1296 | 5.07% | 16.30% | 1728 |
| 006106 | 景顺长城量化港股通股票A | 0.0301 | 1.1793 | 1.7647 | 3.56% | 18.52% | 1636 |
| 006195 | 国金量化多因子股票A | 0.7559 | 2.9643 | 4.2002 | 18.30% | 20.24% | 1792 |
| 006373 | 国富全球科技互联混合(QDII)人民币A | 1.1215 | 1.6608 | 9.5896 | 26.48% | 20.93% | 1768 |
| 006486 | 广发中证1000ETF联接A | 0.2213 | 1.3221 | 3.0573 | 7.98% | 22.48% | 1791 |
| 006614 | 嘉实港股通新经济指数C | -0.0542 | 0.0718 | -1.3599 | 1.38% | 29.87% | 1744 |
| 006718 | 国融融盛龙头严选混合A | 0.1478 | -0.7531 | -2.4074 | 7.70% | 31.83% | 1619 |
| 007153 | 汇添富中证银行ETF联接A | 0.1499 | 0.1473 | -2.1991 | 5.51% | 16.72% | 1680 |
| 007605 | 嘉实沪深300红利低波动ETF联接A | 0.0868 | -0.9435 | 0.4696 | 4.20% | 13.88% | 1531 |
| 007721 | 天弘标普500发起(QDII-FOF)A | 0.5752 | 0.4986 | -0.4438 | 12.80% | 17.03% | 1562 |
| 007844 | 华宝标普油气上游股票人民币C | 0.2222 | 0.0741 | 8.3911 | 12.10% | 40.93% | 1496 |
| 008401 | 大成标普500等权重指数(QDII)C人民币 | 0.2588 | 0.1339 | -0.6829 | 6.59% | 13.87% | 602 |
| 008706 | 建信富时100指数(QDII)C人民币 | 0.3406 | 1.5191 | 4.1959 | 8.61% | 16.46% | 1461 |
| 008811 | 鹏华科技创新混合 | 0.3840 | 1.7289 | 5.3226 | 12.16% | 23.86% | 1460 |
| 009891 | 融通产业趋势臻选股票A | 0.4441 | 2.2122 | 0.0022 | 16.83% | 31.13% | 1317 |
| 010052 | 长城久嘉创新成长混合C | 0.1754 | 1.9119 | 0.7961 | 9.32% | 36.03% | 1144 |
| 010341 | 招商产业精选股票A | 0.1286 | 1.0959 | 6.7007 | 5.81% | 21.88% | 1251 |
| 010391 | 易方达战略新兴产业股票A | 0.3124 | 2.7239 | 0.3951 | 12.60% | 30.75% | 1229 |
| 011936 | 华夏阿尔法精选混合A | -0.1485 | 0.6144 | -0.5946 | -0.34% | 22.52% | 1081 |
| 012060 | 富国全球消费精选混合(QDII)人民币A | 0.6380 | 2.0972 | 5.2202 | 14.03% | 17.29% | 1086 |
| 012509 | 兴全安悦稳健养老一年持有混合(FOF)A | 0.2411 | 1.1549 | 0.6442 | 4.06% | 4.38% | 1046 |
| 012728 | 国泰中证动漫游戏ETF联接A | 0.2926 | 1.0012 | 4.1068 | 13.28% | 35.12% | 1152 |
| 013048 | 富国中证新能源汽车指数(LOF)C | -0.2365 | 1.3670 | -1.2108 | -4.27% | 30.75% | 1137 |
| 013277 | 富国创业板ETF联接C | -0.2052 | 1.7055 | 0.1525 | -2.66% | 27.57% | 1116 |
| 013465 | 博时智选量化多因子股票A | 0.1197 | 0.1416 | 0.8254 | 5.81% | 23.52% | 1018 |
| 014978 | 华安纳斯达克100ETF联接(QDII)C | 0.5812 | 0.3064 | -1.0128 | 16.25% | 22.80% | 981 |
| 015016 | 华安德国(DAX)联接(QDII)C | 0.6131 | 0.9383 | 0.1178 | 13.59% | 17.27% | 981 |
| 015577 | 国联安上证商品ETF联接C | 0.6254 | 2.6315 | 6.3524 | 15.15% | 19.43% | 938 |
| 016667 | 景顺长城全球半导体芯片股票A(QDII-LOF)(美元现汇) | 0.0849 | 1.7841 | 4.5429 | 33.34% | 357.20% | 704 |
| 017512 | 广发北证50成份指数A | 0.4434 | 0.5709 | 1.5006 | 21.12% | 40.87% | 778 |
| 017962 | 广发医药创新混合发起式A | 0.1488 | 0.7669 | -1.5644 | 7.21% | 28.30% | 599 |
| 018048 | 申万菱信数字产业股票型发起式A | 0.3385 | 0.6744 | 3.1529 | 15.31% | 36.37% | 647 |
| 020422 | 华夏中证港股通内地金融ETF发起式联接A | 1.5207 | 1.2272 | 1.5823 | 34.92% | 20.99% | 521 |
| 021539 | 华安法国CAC40ETF发起式联接(QDII)A | 0.3499 | 0.6426 | 0.8002 | 8.30% | 15.15% | 393 |
| 022327 | 宏利高端装备股票A | 3.7867 | 3.8590 | 8.5571 | 68.06% | 17.18% | 259 |
| 022741 | 万家180指数C | 0.8257 | 1.0261 | 0.6779 | 14.24% | 13.62% | 301 |
| 025832 | 天弘中证电网设备主题指数发起A | 8.2123 | 8.2123 | 10.3904 | 209.80% | 25.18% | 52 |
| 100055 | 富国全球科技互联网股票(QDII)A | 0.3945 | 1.7225 | 1.0561 | 10.19% | 18.22% | 3559 |
| 162415 | 华宝标普美国消费人民币A | 0.4269 | -0.0079 | -1.6670 | 12.05% | 21.19% | 2416 |
| 400032 | 东方主题精选混合 | -0.0700 | 0.5202 | -0.9820 | 0.99% | 28.66% | 2679 |
| 519196 | 万家新兴蓝筹A | 0.5113 | 2.1926 | 2.8535 | 17.05% | 27.48% | 2480 |

**共计算 49 只基金**

## 五、典型案例详细计算过程

### 案例1: 001270 英大灵活配置混合型发起式A

**基础数据**:
- 数据天数: 2665天
- 数据范围: 2015-05-07 至 2026-02-10
- 日收益率格式: 百分比 (转换前均值: 0.7873)

**步骤1: 数据准备**
```
日收益率统计（转换前）:
  均值 = 0.023438 (即0.023%)
  标准差 = 1.285856 (即1.286%)

转换为小数格式:
  均值 = 0.000234
  标准差 = 0.012859
```

**步骤2: 计算全期指标**
```
起始净值 = 1.0000 (2015-05-07)
最新净值 = 1.4973 (2026-02-10)

总收益率 = (1.4973 - 1.0000) / 1.0000 = 0.4973 (49.73%)

年化收益率 = (1 + 0.4973)^(252/2665) - 1 = 0.0389 (3.89%)

年化波动率 = 0.012859 × √252 = 0.012859 × 15.8745 = 0.2041 (20.41%)

夏普比率(全期) = (0.0389 - 0.03) / 0.2041 = 0.0436
```

**步骤3: 计算近一年指标**
```
近一年数据: 258个交易日
起始净值 = 1.2320
最新净值 = 1.4973

总收益率 = (1.4973 - 1.2320) / 1.2320 = 0.2153 (21.53%)
年化收益率 = (1 + 0.2153)^(252/258) - 1 = 0.2098 (20.98%)

近一年日收益率标准差 = 0.019706
年化波动率 = 0.019706 × √252 = 0.3128 (31.28%)

夏普比率(1年) = (0.2098 - 0.03) / 0.3128 = 0.5750
```

**步骤4: 计算YTD指标**
```
YTD数据: 27个交易日 (2026-01-01 至 2026-02-10)
起始净值 = 1.5499
最新净值 = 1.4973

总收益率 = (1.4973 - 1.5499) / 1.5499 = -0.0340 (-3.40%)
年化收益率 = (1 - 0.0340)^(252/27) - 1 = -0.2755 (-27.55%)

YTD日收益率标准差 = 0.020845
年化波动率 = 0.020845 × √252 = 0.3312 (33.12%)

夏普比率(YTD) = (-0.2755 - 0.03) / 0.3312 = -0.9225
```

**计算结果汇总**:
| 指标 | 数值 |
|------|------|
| 夏普比率(全期) | 0.0436 |
| 夏普比率(1年) | 0.5750 |
| 夏普比率(YTD) | -0.9225 |
| 年化收益率 | 3.89% |
| 年化波动率 | 20.41% |

---

### 案例2: 006373 国富全球科技互联混合(QDII)人民币A（夏普全期最高之一）

**基础数据**:
- 数据天数: 1768天
- 数据范围: 2018-11-20 至 2026-02-09

**计算过程**:
```
起始净值 = 1.0000
最新净值 = 5.1966

总收益率 = 4.1966 (419.66%)
年化收益率 = 0.2648 (26.48%)

日收益率标准差(小数) = 0.013187
年化波动率 = 0.2093 (20.93%)

夏普比率(全期) = (0.2648 - 0.03) / 0.2093 = 1.1215
```

**计算结果汇总**:
| 指标 | 数值 |
|------|------|
| 夏普比率(全期) | 1.1215 |
| 夏普比率(1年) | 1.6608 |
| 夏普比率(YTD) | 9.5896 |
| 年化收益率 | 26.48% |
| 年化波动率 | 20.93% |

---

### 案例3: 025832 天弘中证电网设备主题指数发起A（新基金异常）

**基础数据**:
- 数据天数: 仅52天（新基金）
- 数据范围: 2025-11-25 至 2026-02-10

**计算过程**:
```
起始净值 = 1.0000
最新净值 = 1.2628

总收益率 = 0.2628 (26.28%)
年化收益率 = (1.2628)^(252/52) - 1 = 2.0980 (209.80%)

日收益率标准差(小数) = 0.015863
年化波动率 = 0.2518 (25.18%)

夏普比率(全期) = (2.0980 - 0.03) / 0.2518 = 8.2123
```

**异常说明**: 该基金成立仅52天，短期涨幅26.28%，年化后收益率高达209.80%，导致夏普比率异常高。**新基金的夏普比率不可靠**。

---

### 案例4: 022327 宏利高端装备股票A（高收益新基金）

**基础数据**:
- 数据天数: 259天
- 数据范围: 2025-01-16 至 2026-02-10

**计算过程**:
```
起始净值 = 1.0000
最新净值 = 1.7050

总收益率 = 0.7050 (70.50%)
年化收益率 = 0.6806 (68.06%)

日收益率标准差(小数) = 0.010823
年化波动率 = 0.1718 (17.18%)

夏普比率(全期) = (0.6806 - 0.03) / 0.1718 = 3.7867
```

**说明**: 该基金成立约1年，收益率70.50%，表现优异，夏普比率高是合理的。

---

### 案例5: 016667 景顺长城全球半导体芯片股票A（波动率异常）

**基础数据**:
- 数据天数: 704天
- 数据范围: 2023-08-03 至 2026-02-09

**计算过程**:
```
起始净值 = 0.8252
最新净值 = 2.2920

总收益率 = 1.7775 (177.75%)
年化收益率 = 0.3334 (33.34%)

日收益率标准差(小数) = 0.224964
年化波动率 = 3.5720 (357.20%)

夏普比率(全期) = (0.3334 - 0.03) / 3.5720 = 0.0849
```

**异常说明**: 该基金的波动率高达357.20%，远超正常范围（通常20%-40%）。可能是因为QDII基金的数据特性或数据源问题。

## 六、数据统计分析

### 6.1 夏普比率分布

| 统计项 | 夏普(全期) | 夏普(1年) | 夏普(YTD) |
|--------|------------|-----------|-----------|
| 平均值 | 0.5630 | 1.2980 | 1.7928 |
| 最大值 | 8.2123 | 8.2123 | 10.3904 |
| 最小值 | -0.2365 | -0.9435 | -2.4074 |
| 正数数量 | 44 | 45 | 34 |
| 负数数量 | 5 | 4 | 15 |

### 6.2 年化波动率分布

| 统计项 | 数值 |
|--------|------|
| 平均值 | 38.45% |
| 最大值 | 357.20% (016667，异常) |
| 最小值 | 4.38% (012509，稳健型FOF) |
| 中位数 | 22.48% |

### 6.3 特殊基金说明

| 基金代码 | 特殊情况 |
|----------|----------|
| 025832 | 新基金，仅52天数据，夏普比率不可靠 |
| 022327 | 新基金，259天，高收益高夏普 |
| 016667 | 波动率异常高(357.20%)，数据可能有问题 |
| 012509 | FOF基金，波动率最低(4.38%)，符合特性 |

## 七、结论

1. **整体表现**: 49只基金中，44只夏普比率(全期)为正，整体表现良好
2. **时间维度**: 近期(1年/YTD)夏普普遍高于长期，市场近期表现较好
3. **新基金注意**: 数据天数少于300天的基金，夏普比率可能因年化计算而异常
4. **数据异常**: 016667基金波动率357.20%明显异常，需检查数据源

---

**文档生成时间**: 2026-02-11  
**数据来源**: fund_nav_cache 表  
**计算脚本**: show_all_funds_sharpe_summary.py  
**修复记录**: 
- 修复净值排序问题（2026-02-11）
- 修复波动率计算问题（2026-02-11）
