#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
数据检索层常量定义
集中管理所有列名映射和常量，消除重复定义
"""

from typing import Dict

# =============================================================================
# 基金净值数据列名映射
# =============================================================================
FUND_NAV_COLUMN_MAPPING: Dict[str, str] = {
    '净值日期': 'date',
    '单位净值': 'nav',
    '累计净值': 'accum_nav',
    '日增长率': 'daily_return'
}

# 反向映射（用于输出格式化）
FUND_NAV_COLUMN_MAPPING_REVERSE: Dict[str, str] = {
    v: k for k, v in FUND_NAV_COLUMN_MAPPING.items()
}

# =============================================================================
# ETF 数据列名映射
# =============================================================================
ETF_COLUMN_MAPPING: Dict[str, str] = {
    '代码': 'etf_code',
    '名称': 'etf_name',
    '最新价': 'current_price',
    '涨跌额': 'change',
    '涨跌幅': 'change_percent',
    '成交量': 'volume',
    '成交额': 'turnover',
    '市盈率': 'pe',
    '市净率': 'pb'
}

# =============================================================================
# 新浪实时数据字段映射
# =============================================================================
SINA_REALTIME_FIELD_MAPPING: Dict[str, int] = {
    'fund_name': 0,      # 基金名称
    'today_nav': 1,      # 今日净值
    'yesterday_nav': 2,  # 昨日净值
    'daily_growth': 3,   # 日增长率
    'date': 4,           # 日期
    'estimate_nav': 5,   # 估算净值
    'estimate_growth': 6 # 估算增长率
}

# =============================================================================
# 基金信息列名映射
# =============================================================================
FUND_INFO_COLUMN_MAPPING: Dict[str, str] = {
    '项目': 'item',
    '数值': 'value'
}

# =============================================================================
# QDII 基金检测关键词
# =============================================================================
QDII_KEYWORDS: list = [
    'QDII',
    '全球', '国际', '海外', '环球', '世界',
    '纳斯达克', '标普', '道琼斯', '印度', '越南', '日本', '德国', '法国', '英国', '富时',
    '原油', '石油', '黄金', '商品'
]

# =============================================================================
# 数据源优先级配置
# =============================================================================
DATA_SOURCE_PRIORITY: Dict[str, int] = {
    'akshare': 1,
    'tushare': 2,
    'sina': 3
}

# =============================================================================
# 默认配置值
# =============================================================================
DEFAULT_TIMEOUT: int = 10
DEFAULT_RETRY_TIMES: int = 3
DEFAULT_RETRY_DELAY: float = 2.0
DEFAULT_MAX_TRACE_DAYS: int = 15  # QDII基金追溯天数
