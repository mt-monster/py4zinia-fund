# æŠ•èµ„ç­–ç•¥é…ç½®æ–‡ä»¶
# Investment Strategy Configuration

# ============================================
# ç­–ç•¥é˜ˆå€¼é…ç½® (Strategy Thresholds)
# ============================================
strategies:
  # å¼ºåŠ¿çªç ´ç­–ç•¥ - ä¸Šæ¶¨æ—¶æŒæœ‰ï¼Œä¸è¿½é«˜
  strong_bull:
    conditions:
      - today_return_min: 1.0
        today_return_max: .inf
        prev_day_return_min: 0.5
        prev_day_return_max: .inf
      - today_return_min: 0.5
        today_return_max: .inf
        prev_day_return_min: 1.0
        prev_day_return_max: .inf
    action: hold  # æ”¹ä¸ºæŒæœ‰ï¼Œä¸è¿½é«˜
    buy_multiplier: 0.0  # ä¸ä¹°å…¥
    redeem_amount: 0
    max_position_ratio: 1.0
    label: "ğŸŸ¢ **å¼ºåŠ¿çªç ´**"
    description: "åŸºé‡‘å¼ºåŠ¿ä¸Šæ¶¨ï¼Œå»ºè®®æŒæœ‰ä¸åŠ¨ï¼ˆè®©åˆ©æ¶¦å¥”è·‘ï¼‰"

  # æŒç»­ä¸Šæ¶¨ç­–ç•¥ - ä¸Šæ¶¨æ—¶æŒæœ‰
  bull_continuation:
    conditions:
      - today_return_min: 0.3
        today_return_max: 1.0
        prev_day_return_min: 0.3
        prev_day_return_max: 1.0
      - today_return_min: 0.2
        today_return_max: 0.5
        prev_day_return_min: 0.5
        prev_day_return_max: 1.0
    action: hold  # æ”¹ä¸ºæŒæœ‰
    buy_multiplier: 0.0
    redeem_amount: 0
    max_position_ratio: 1.0
    label: "ğŸŸ¡ **è¿æ¶¨åŠ é€Ÿ**"
    description: "åŸºé‡‘æŒç»­ä¸Šæ¶¨ï¼Œå»ºè®®æŒæœ‰ä¸åŠ¨ï¼ˆè®©åˆ©æ¶¦å¥”è·‘ï¼‰"

  # æ¸©å’Œä¸Šæ¶¨ç­–ç•¥ - å°å¹…ä¸Šæ¶¨ï¼ŒæŒæœ‰è§‚æœ›
  gentle_bull:
    conditions:
      - today_return_min: 0.0
        today_return_max: 0.3
        prev_day_return_min: 0.0
        prev_day_return_max: 0.3
    action: hold
    buy_multiplier: 0.0
    redeem_amount: 0
    label: "ğŸŸ¢ **æ¸©å’Œä¸Šæ¶¨**"
    description: "åŸºé‡‘æ¸©å’Œä¸Šæ¶¨ï¼Œå»ºè®®æŒæœ‰è§‚æœ›"

  # ä¸Šæ¶¨æ”¾ç¼“ç­–ç•¥
  bull_slowing:
    conditions:
      - today_return_min: 0.0
        today_return_max: 0.3
        prev_day_return_min: 0.3
        prev_day_return_max: .inf
      - today_return_min: -0.3
        today_return_max: 0.0
        prev_day_return_min: 0.5
        prev_day_return_max: .inf
    action: hold
    buy_multiplier: 0.0
    redeem_amount: 0
    label: "ğŸŸ  **è¿æ¶¨æ”¾ç¼“**"
    description: "ä¸Šæ¶¨åŠ¿å¤´æ”¾ç¼“ï¼Œå»ºè®®æŒæœ‰è§‚æœ›"

  # åè½¬ä¸Šæ¶¨ç­–ç•¥ - ç”±è·Œè½¬æ¶¨ï¼ŒæŒæœ‰è§‚æœ›
  bull_reversal:
    conditions:
      - today_return_min: 0.3
        today_return_max: .inf
        prev_day_return_min: -.inf
        prev_day_return_max: 0.0
    action: hold  # æ”¹ä¸ºæŒæœ‰è§‚æœ›
    buy_multiplier: 0.0
    redeem_amount: 0
    label: "ğŸ”µ **åè½¬ä¸Šæ¶¨**"
    description: "åŸºé‡‘ç”±è·Œè½¬æ¶¨ï¼Œå»ºè®®æŒæœ‰è§‚æœ›ï¼ˆç¡®è®¤è¶‹åŠ¿ï¼‰"

  # è½¬åŠ¿ä¼‘æ•´ç­–ç•¥ - ä¸Šæ¶¨åä¼‘æ•´ï¼Œéƒ¨åˆ†æ­¢ç›ˆ
  consolidation:
    conditions:
      - today_return_min: 0.0
        today_return_max: 0.01
        prev_day_return_min: 0.3
        prev_day_return_max: .inf
    action: weak_sell
    buy_multiplier: 0.0
    redeem_amount: 0.05  # èµå›5%ä»“ä½æ­¢ç›ˆ
    max_position_ratio: 0.9
    label: "ğŸŸ  **è½¬åŠ¿ä¼‘æ•´**"
    description: "ä¸Šæ¶¨åä¼‘æ•´ï¼Œå»ºè®®éƒ¨åˆ†æ­¢ç›ˆï¼ˆèµå›5%ä»“ä½ï¼‰"

  # åè½¬ä¸‹è·Œç­–ç•¥ - ç”±æ¶¨è½¬è·Œæ—¶æ­¢ç›ˆ
  bear_reversal:
    conditions:
      - today_return_min: -.inf
        today_return_max: 0.0
        prev_day_return_min: 0.3
        prev_day_return_max: .inf
    action: sell
    buy_multiplier: 0.0
    redeem_amount: 0.08  # èµå›8%ä»“ä½æ­¢ç›ˆ
    max_position_ratio: 1.0
    label: "ğŸ”´ **åè½¬ä¸‹è·Œ**"
    description: "åŸºé‡‘ç”±æ¶¨è½¬è·Œï¼Œå»ºè®®æ­¢ç›ˆï¼ˆèµå›8%ä»“ä½ï¼‰"

  # ç»å¯¹ä¼ç¨³ç­–ç•¥ - ä¼ç¨³åä¹°å…¥
  absolute_bottom:
    conditions:
      - today_return_min: 0.0
        today_return_max: 0.01
        prev_day_return_min: -0.3
        prev_day_return_max: 0.0
    action: buy
    buy_multiplier: 1.8  # ä¼ç¨³åä¹°å…¥
    redeem_amount: 0
    observation_period: 3
    max_position_ratio: 0.8
    label: "âšª **ç»å¯¹ä¼ç¨³**"
    description: "åŸºé‡‘ä¼ç¨³ï¼Œå»ºè®®ä¹°å…¥ï¼ˆæŠ„åº•æœºä¼šï¼‰"

  # é¦–æ¬¡å¤§è·Œç­–ç•¥ - å¤§è·Œæ—¶ç§¯æä¹°å…¥
  first_major_drop:
    conditions:
      - today_return_min: -.inf
        today_return_max: -2.0
        prev_day_return_min: -0.1
        prev_day_return_max: 0.1
    action: strong_buy  # æ”¹ä¸ºå¼ºçƒˆä¹°å…¥
    buy_multiplier: 2.5  # åŠ å¤§ä¹°å…¥åŠ›åº¦
    redeem_amount: 0
    label: "ğŸ”´ **é¦–æ¬¡å¤§è·Œ**"
    description: "åŸºé‡‘é¦–æ¬¡å¤§è·Œï¼Œå»ºè®®ç§¯æä¹°å…¥ï¼ˆæŠ„åº•è‰¯æœºï¼‰"

  # æŒç»­ä¸‹è·Œç­–ç•¥ - ä¸‹è·Œæ—¶ä¹°å…¥è¡¥ä»“
  bear_continuation:
    conditions:
      - today_return_min: -.inf
        today_return_max: -0.5
        prev_day_return_min: -.inf
        prev_day_return_max: -0.5
    action: buy  # æ”¹ä¸ºä¹°å…¥
    buy_multiplier: 1.5  # é€¢ä½ä¹°å…¥
    redeem_amount: 0
    max_position_ratio: 1.0
    label: "ğŸŸ£ **æŒç»­ä¸‹è·Œ**"
    description: "åŸºé‡‘æŒç»­ä¸‹è·Œï¼Œå»ºè®®é€¢ä½ä¹°å…¥ï¼ˆæ‘Šä½æˆæœ¬ï¼‰"

  # è·Œé€Ÿæ”¾ç¼“ç­–ç•¥ - ä¸‹è·Œæ”¾ç¼“æ—¶ä¹°å…¥
  bear_slowing:
    conditions:
      - today_return_min: -0.5
        today_return_max: 0.0
        prev_day_return_min: -.inf
        prev_day_return_max: -1.0
    action: buy
    buy_multiplier: 2.0  # åŠ å¤§ä¹°å…¥åŠ›åº¦
    redeem_amount: 0
    label: "ğŸŸ¦ **è·Œé€Ÿæ”¾ç¼“**"
    description: "ä¸‹è·Œé€Ÿåº¦æ”¾ç¼“ï¼Œå»ºè®®ç§¯æä¹°å…¥ï¼ˆæŠ„åº•æœºä¼šï¼‰"

# ============================================
# ä¹°å…¥å€æ•°é…ç½® (Buy Multipliers) - ä¼˜åŒ–ä¸º"ä¸Šæ¶¨æŒæœ‰ï¼Œä¸‹è·Œè¡¥ä»“"ç­–ç•¥
# ============================================
buy_multipliers:
  strong_buy: 2.5      # å¼ºçƒˆä¹°å…¥ï¼ˆå¤§è·Œæ—¶ï¼‰
  buy: 1.8             # æ­£å¸¸ä¹°å…¥ï¼ˆä¸‹è·Œæ—¶ï¼‰
  weak_buy: 1.2        # è°¨æ…ä¹°å…¥ï¼ˆå°è·Œæ—¶ï¼‰
  hold: 0.0            # æŒæœ‰ï¼ˆä¸Šæ¶¨æˆ–è§‚æœ›æ—¶ï¼‰
  sell: 0.0            # å–å‡ºï¼ˆæç«¯æƒ…å†µï¼‰
  weak_sell: 0.0       # å¼±å–å‡ºï¼ˆæç«¯æƒ…å†µï¼‰
  stop_loss: 0.0       # æ­¢æŸ

# ============================================
# æ­¢æŸé…ç½® (Stop Loss Configuration) - å·²ä¼˜åŒ–
# ============================================
stop_loss:
  # è­¦å‘Šé˜ˆå€¼ï¼šç´¯è®¡äºæŸè¶…è¿‡8%è§¦å‘è­¦å‘Š
  warning_threshold: -0.08
  # æ­¢æŸé˜ˆå€¼ï¼šç´¯è®¡äºæŸè¶…è¿‡12%è§¦å‘æ­¢æŸ
  stop_loss_threshold: -0.12
  # æ­¢æŸæ—¶æ˜¯å¦å…¨éƒ¨èµå›
  full_redeem: false  # æ”¹ä¸ºéƒ¨åˆ†èµå›
  redeem_ratio: 0.3    # æ­¢æŸæ—¶èµå›30%ä»“ä½
  # æ­¢æŸæ ‡ç­¾
  stop_loss_label: "ğŸ›‘ **æ­¢æŸè§¦å‘**"
  # è­¦å‘Šæ ‡ç­¾
  warning_label: "âš ï¸ **äºæŸè­¦å‘Š**"
  # æ­¢æŸæ“ä½œå»ºè®®
  stop_loss_suggestion: "ç´¯è®¡äºæŸè¶…è¿‡é˜ˆå€¼ï¼Œå»ºè®®èµå›30%ä»“ä½æ­¢æŸ"
  # è­¦å‘Šæ“ä½œå»ºè®®
  warning_suggestion: "ç´¯è®¡äºæŸæ¥è¿‘æ­¢æŸçº¿ï¼Œè¯·å¯†åˆ‡å…³æ³¨ï¼Œè€ƒè™‘å‡ä»“"

# ============================================
# æ³¢åŠ¨ç‡é…ç½® (Volatility Configuration)
# ============================================
volatility:
  # é«˜æ³¢åŠ¨é˜ˆå€¼ï¼šæ³¢åŠ¨ç‡è¶…è¿‡25%
  high_threshold: 0.25
  # ä½æ³¢åŠ¨é˜ˆå€¼ï¼šæ³¢åŠ¨ç‡ä½äº10%
  low_threshold: 0.10
  # é«˜æ³¢åŠ¨æ—¶ä»“ä½è°ƒæ•´ç³»æ•°ï¼ˆå‡å°‘50%ï¼‰
  high_adjustment: 0.5
  # ä½æ³¢åŠ¨æ—¶ä»“ä½è°ƒæ•´ç³»æ•°ï¼ˆå¢åŠ 20%ï¼‰
  low_adjustment: 1.2
  # æ­£å¸¸æ³¢åŠ¨æ—¶ä»“ä½è°ƒæ•´ç³»æ•°
  normal_adjustment: 1.0
  # è®¡ç®—æ³¢åŠ¨ç‡çš„å†å²å¤©æ•°
  lookback_days: 20

# ============================================
# è¶‹åŠ¿é…ç½® (Trend Configuration)
# ============================================
trend:
  # çŸ­æœŸå‡çº¿å‘¨æœŸï¼ˆå¤©ï¼‰
  ma_short_period: 5
  # é•¿æœŸå‡çº¿å‘¨æœŸï¼ˆå¤©ï¼‰
  ma_long_period: 10
  # ä¸Šæ¶¨è¶‹åŠ¿ä¹°å…¥å€æ•°è°ƒæ•´ï¼ˆå¢åŠ 20%ï¼‰
  uptrend_adjustment: 1.2
  # ä¸‹è·Œè¶‹åŠ¿ä¹°å…¥å€æ•°è°ƒæ•´ï¼ˆå‡å°‘30%ï¼‰
  downtrend_adjustment: 0.7
  # æ¨ªç›˜è¶‹åŠ¿ä¹°å…¥å€æ•°è°ƒæ•´
  sideways_adjustment: 1.0

# ============================================
# é£é™©æŒ‡æ ‡é…ç½® (Risk Metrics Configuration)
# ============================================
risk_metrics:
  # VaRç½®ä¿¡æ°´å¹³
  var_confidence_levels:
    - 0.95
    - 0.99
  # æ— é£é™©æ”¶ç›Šç‡
  risk_free_rate: 0.03
  # æ¯å¹´äº¤æ˜“æ—¥æ•°
  trading_days_per_year: 252
  # å†å²æ•°æ®å¤©æ•°
  historical_days: 365

# ============================================
# å…¨å±€é£é™©æ§åˆ¶é…ç½® (Global Risk Control)
# ============================================
global_risk_control:
  # æœ€å¤§æ€»ä»“ä½æ¯”ä¾‹
  max_total_position: 1.0
  # å•åªåŸºé‡‘æœ€å¤§ä»“ä½æ¯”ä¾‹
  max_single_fund_position: 0.3
  # æœ€å°ç°é‡‘æŒæœ‰æ¯”ä¾‹
  min_cash_ratio: 0.1
  # æœ€å¤§åŒæ—¶æŒä»“åŸºé‡‘æ•°é‡
  max_fund_count: 10
  # å¸‚åœºæç«¯æƒ…å†µä¸‹çš„ä»“ä½ä¸Šé™
  extreme_market_position_limit: 0.5
  # æ³¢åŠ¨ç‡è¿‡é«˜æ—¶çš„ä¹°å…¥å€æ•°è°ƒæ•´
  volatility_high_multiplier: 0.7
  # åŸºé‡‘è§„æ¨¡è¿‡å°æ—¶çš„ä¹°å…¥å€æ•°è°ƒæ•´
  small_fund_multiplier: 0.8

# ============================================
# ç­–ç•¥æ‰§è¡Œé…ç½® (Strategy Execution)
# ============================================
execution_rules:
  # æ˜¯å¦å¯ç”¨è§‚å¯ŸæœŸç¡®è®¤
  enable_observation_period: true
  # é‡å¤§æ“ä½œçš„è§‚å¯ŸæœŸï¼ˆå¤©ï¼‰
  major_operation_observation_days: 3
  # æ˜¯å¦å¯ç”¨ä»“ä½æ§åˆ¶
  enable_position_control: true
  # æ˜¯å¦å¯ç”¨å¸‚åœºæƒ…ç»ªåˆ†æ
  enable_market_sentiment: false
  # æ˜¯å¦å¯ç”¨åŸºé‡‘åŸºæœ¬é¢åˆ†æ
  enable_fundamentals: false
  # ç­–ç•¥ä¼˜å…ˆçº§æƒé‡ï¼ˆæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
  priority_weights:
    strong_bull: 9
    bull_reversal: 8
    bear_slowing: 7
    first_major_drop: 6
    bull_continuation: 5
    bull_slowing: 4
    gentle_bull: 4
    consolidation: 3
    bear_reversal: 2
    bear_continuation: 1

# ============================================
# é»˜è®¤ç­–ç•¥é…ç½® (Default Strategy)
# ============================================
default_strategy:
  action: hold
  buy_multiplier: 0.0
  redeem_amount: 0
  label: "ğŸ”´ **æœªçŸ¥çŠ¶æ€**"
  description: "ä¸ä¹°å…¥ï¼Œä¸èµå›"

# ============================================
# å¢å¼ºåŠŸèƒ½é…ç½® (Enhanced Features)
# ============================================

# åˆ†å±‚æ­¢æŸé…ç½®
layered_stop_loss:
  enabled: true
  levels:
    - threshold: -0.05
      action: reduce
      ratio: 0.20
      description: "ç¬¬ä¸€çº§æ­¢æŸï¼šäºæŸ5%æ—¶å‡ä»“20%"
    - threshold: -0.10
      action: reduce
      ratio: 0.30
      description: "ç¬¬äºŒçº§æ­¢æŸï¼šäºæŸ10%æ—¶å‡ä»“30%"
    - threshold: -0.15
      action: exit
      ratio: 1.00
      description: "ç¬¬ä¸‰çº§æ­¢æŸï¼šäºæŸ15%æ—¶å…¨éƒ¨é€€å‡º"
  cooldown_days: 5

# ä¿¡å·ç¡®è®¤é…ç½®
signal_confirmation:
  enabled: true
  min_confirmation_days: 2
  strong_signal_days: 3

# åŠ¨æ€é˜ˆå€¼é…ç½®
dynamic_threshold:
  enabled: true
  baseline_volatility: 0.15
  min_adjustment: 0.5
  max_adjustment: 2.0

# è¶‹åŠ¿æ£€æµ‹é…ç½®
trend_detection:
  ma_periods: [5, 10, 20]
  adx_period: 14
  strong_trend_threshold: 25
  weak_trend_threshold: 15

# å¸‚åœºçŠ¶æ€é…ç½®
market_regime:
  bull_market:
    vix_max: 0.15
    return_min: 0.3
    breadth_min: 1.2
    position_adjustment: 1.2
  bear_market:
    vix_min: 0.30
    return_max: -0.5
    breadth_max: 0.7
    position_adjustment: 0.5
  volatile:
    vix_min: 0.25
    position_adjustment: 0.7
  ranging:
    position_adjustment: 1.0

# æ™ºèƒ½å®šæŠ•é…ç½®
smart_dca:
  enabled: true
  valuation_thresholds:
    extremely_low: 20
    low: 40
    normal: 60
    high: 80
  multipliers:
    extremely_low: 2.0
    low: 1.5
    normal: 1.0
    high: 0.5
    extremely_high: 0.0
  max_multiplier: 3.0
  min_multiplier: 0.0
