# å¢å¼ºå›æµ‹å¼•æ“ - å¯è§†åŒ–æŒ‡å—

## ğŸ¨ æ¦‚è¿°

å¢å¼ºå›æµ‹å¼•æ“çš„å¯è§†åŒ–æ¨¡å—æä¾›äº†å…¨é¢çš„å›¾è¡¨å’Œåˆ†æå·¥å…·ï¼Œå¸®åŠ©æŠ•èµ„è€…å’Œåˆ†æå¸ˆç›´è§‚åœ°ç†è§£æŠ•èµ„ç»„åˆçš„è¡¨ç°ã€é£é™©ç‰¹å¾å’Œå½’å› åˆ†æã€‚

## ğŸ“Š ç”Ÿæˆçš„å›¾è¡¨ç±»å‹

### 1. ç´¯ç§¯æ”¶ç›Šå¯¹æ¯”å›¾ (Cumulative Returns)
- **æ–‡ä»¶**: `01_cumulative_returns.png`
- **å†…å®¹**: æŠ•èµ„ç»„åˆ vs åŸºå‡†çš„ç´¯ç§¯æ”¶ç›Šå¯¹æ¯”
- **å…³é”®ä¿¡æ¯**: 
  - æ€»æ”¶ç›Šç‡å¯¹æ¯”
  - è¶…é¢æ”¶ç›Šè¶‹åŠ¿
  - æ—¶é—´åºåˆ—è¡¨ç°

### 2. å›æ’¤åˆ†æå›¾ (Drawdown Analysis)
- **æ–‡ä»¶**: `02_drawdown_analysis.png`
- **å†…å®¹**: å›æ’¤æ·±åº¦å’ŒæŒç»­æ—¶é—´åˆ†æ
- **å…³é”®ä¿¡æ¯**:
  - æœ€å¤§å›æ’¤: -46.11%
  - å›æ’¤æŒç»­æ—¶é—´
  - æ°´ä¸‹æœŸé—´å¯è§†åŒ–

### 3. é£é™©æŒ‡æ ‡ä»ªè¡¨æ¿ (Risk Metrics Dashboard)
- **æ–‡ä»¶**: `03_risk_metrics_dashboard.png`
- **å†…å®¹**: ç»¼åˆé£é™©æŒ‡æ ‡å±•ç¤º
- **åŒ…å«æŒ‡æ ‡**:
  - å¤æ™®æ¯”ç‡: 1.53
  - ä¿¡æ¯æ¯”ç‡: 0.80
  - VaR (95%): -3.05%
  - æœ€å¤§å›æ’¤ä»ªè¡¨ç›˜

### 4. è¡Œä¸šå½’å› åˆ†æ (Sector Attribution)
- **æ–‡ä»¶**: `04_sector_attribution.png`
- **å†…å®¹**: è¡Œä¸šé…ç½®å’Œä¸»åŠ¨ç®¡ç†åˆ†æ
- **å…³é”®ä¿¡æ¯**:
  - æŠ•èµ„ç»„åˆè¡Œä¸šé…ç½®
  - åŸºå‡†è¡Œä¸šé…ç½®
  - ä¸»åŠ¨é…ç½® (è¶…é…/ä½é…)
  - ç§‘æŠ€è‚¡è¶…é… +18.0%

### 5. è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿç»“æœ (Monte Carlo Results)
- **æ–‡ä»¶**: `05_monte_carlo_results.png`
- **å†…å®¹**: æœªæ¥æ”¶ç›Šæ¦‚ç‡åˆ†æ
- **å…³é”®ä¿¡æ¯**:
  - æ”¶ç›Šåˆ†å¸ƒç›´æ–¹å›¾
  - åˆ†ä½æ•°åˆ†æ
  - é£é™©æŒ‡æ ‡ (äºæŸæ¦‚ç‡: 7.6%)
  - ç½®ä¿¡åŒºé—´

### 6. æ»šåŠ¨ç»©æ•ˆæŒ‡æ ‡ (Rolling Metrics)
- **æ–‡ä»¶**: `06_rolling_metrics.png`
- **å†…å®¹**: æ—¶é—´åºåˆ—æ»šåŠ¨æŒ‡æ ‡
- **åŒ…å«æŒ‡æ ‡**:
  - æ»šåŠ¨å¹´åŒ–æ”¶ç›Šç‡
  - æ»šåŠ¨æ³¢åŠ¨ç‡
  - æ»šåŠ¨å¤æ™®æ¯”ç‡
  - æ»šåŠ¨ä¿¡æ¯æ¯”ç‡

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### åŸºæœ¬ä½¿ç”¨
```python
from visualization_charts import PerformanceVisualizer

# åˆ›å»ºå¯è§†åŒ–å™¨
visualizer = PerformanceVisualizer()

# ç”Ÿæˆç´¯ç§¯æ”¶ç›Šå›¾
fig = visualizer.plot_cumulative_returns(
    portfolio_returns, 
    benchmark_returns,
    save_path="my_returns.png"
)
```

### å®Œæ•´æŠ¥å‘Šç”Ÿæˆ
```python
# å‡†å¤‡æ•°æ®
viz_data = {
    'portfolio_returns': portfolio_returns,
    'benchmark_returns': benchmark_returns,
    'risk_metrics': risk_metrics,
    'sector_allocation': sector_allocation,
    'benchmark_allocation': benchmark_allocation,
    'simulation_results': simulation_results,
    'percentiles': percentiles
}

# ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
figures = visualizer.create_comprehensive_report(
    viz_data, 
    save_dir="my_charts"
)
```

### è¿è¡Œå®Œæ•´ç¤ºä¾‹
```bash
# ç”Ÿæˆæ‰€æœ‰å›¾è¡¨
python visual_example.py

# æŸ¥çœ‹ç”Ÿæˆçš„å›¾è¡¨
ls performance_charts/
```

## ğŸ“ˆ å…³é”®ç»©æ•ˆæŒ‡æ ‡è§£è¯»

### æ”¶ç›ŠæŒ‡æ ‡
- **æ€»æ”¶ç›Šç‡**: 1019.48% (4å¹´)
- **å¹´åŒ–æ”¶ç›Šç‡**: 46.25%
- **åŸºå‡†è¶…é¢æ”¶ç›Š**: æ˜¾è‘—è¶…è¶ŠåŸºå‡†è¡¨ç°

### é£é™©æŒ‡æ ‡
- **å¹´åŒ–æ³¢åŠ¨ç‡**: 30.20%
- **å¤æ™®æ¯”ç‡**: 1.53 (ä¼˜ç§€)
- **ä¿¡æ¯æ¯”ç‡**: 0.80 (è‰¯å¥½)
- **æœ€å¤§å›æ’¤**: -46.11% (éœ€å…³æ³¨)

### é£é™©ä»·å€¼ (VaR)
- **95% VaR**: -3.05% (æ—¥åº¦)
- **99% VaR**: æ›´æç«¯çš„æŸå¤±æƒ…å†µ
- **æ¡ä»¶VaR**: è¶…è¿‡VaRé˜ˆå€¼çš„å¹³å‡æŸå¤±

### è’™ç‰¹å¡æ´›åˆ†æ
- **é¢„æœŸæ”¶ç›Š**: 58.5% (1å¹´æœŸ)
- **äºæŸæ¦‚ç‡**: 7.6%
- **95%åˆ†ä½æ•°**: +147.8% (ä¹è§‚æƒ…å†µ)
- **5%åˆ†ä½æ•°**: -7.6% (æ‚²è§‚æƒ…å†µ)

## ğŸ¯ è¡Œä¸šé…ç½®åˆ†æ

### å½“å‰é…ç½® vs åŸºå‡†
| è¡Œä¸š | æŠ•èµ„ç»„åˆ | åŸºå‡† | ä¸»åŠ¨é…ç½® |
|------|----------|------|----------|
| ç§‘æŠ€ | 63.0% | 45.0% | **+18.0%** |
| åŒ»ç–— | 13.0% | 20.0% | -7.0% |
| é‡‘è | 12.0% | 15.0% | -3.0% |
| æ¶ˆè´¹ | 12.0% | 20.0% | -8.0% |

### é…ç½®ç‰¹ç‚¹
- **ç§‘æŠ€è‚¡é‡ä»“**: æ˜¾è‘—è¶…é…ç§‘æŠ€è‚¡ï¼Œä½“ç°æˆé•¿é£æ ¼
- **é˜²å¾¡æ€§ä¸è¶³**: ä½é…åŒ»ç–—å’Œæ¶ˆè´¹å“ï¼Œé™ä½é˜²å¾¡æ€§
- **ä¸»åŠ¨ç®¡ç†**: 18%çš„ä¸»åŠ¨ä»½é¢ï¼Œä½“ç°ç§¯æç®¡ç†ç­–ç•¥

## ğŸ› ï¸ è‡ªå®šä¹‰å›¾è¡¨

### ä¿®æ”¹é¢œè‰²ä¸»é¢˜
```python
visualizer = PerformanceVisualizer()
visualizer.colors = {
    'portfolio': '#1f77b4',    # è“è‰²
    'benchmark': '#ff7f0e',    # æ©™è‰²
    'positive': '#2ca02c',     # ç»¿è‰²
    'negative': '#d62728',     # çº¢è‰²
    'neutral': '#9467bd'       # ç´«è‰²
}
```

### è°ƒæ•´å›¾è¡¨å°ºå¯¸
```python
visualizer = PerformanceVisualizer(figsize=(15, 10))
```

### æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡
```python
custom_metrics = {
    'annual_return': 0.25,
    'annual_volatility': 0.18,
    'sharpe_ratio': 1.39,
    'max_drawdown': -0.12,
    'custom_metric': 0.85  # è‡ªå®šä¹‰æŒ‡æ ‡
}

fig = visualizer.plot_risk_metrics_dashboard(custom_metrics)
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
performance_charts/
â”œâ”€â”€ 01_cumulative_returns.png      # ç´¯ç§¯æ”¶ç›Šå¯¹æ¯”
â”œâ”€â”€ 02_drawdown_analysis.png       # å›æ’¤åˆ†æ
â”œâ”€â”€ 03_risk_metrics_dashboard.png  # é£é™©æŒ‡æ ‡ä»ªè¡¨æ¿
â”œâ”€â”€ 04_sector_attribution.png      # è¡Œä¸šå½’å› åˆ†æ
â”œâ”€â”€ 05_monte_carlo_results.png     # è’™ç‰¹å¡æ´›ç»“æœ
â””â”€â”€ 06_rolling_metrics.png         # æ»šåŠ¨æŒ‡æ ‡
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§

### å›¾è¡¨è´¨é‡
- **é«˜åˆ†è¾¨ç‡**: 300 DPI PNGæ ¼å¼
- **ä¸“ä¸šæ ·å¼**: ä½¿ç”¨seabornæ ·å¼
- **ä¸­æ–‡æ”¯æŒ**: é…ç½®ä¸­æ–‡å­—ä½“æ˜¾ç¤º
- **äº¤äº’åŠŸèƒ½**: å¯é€‰æ‹©æ˜¾ç¤ºäº¤äº’å¼å›¾è¡¨

### æ•°æ®å¤„ç†
- **è‡ªåŠ¨ç¼©æ”¾**: è‡ªåŠ¨è°ƒæ•´åæ ‡è½´èŒƒå›´
- **æ ¼å¼åŒ–**: ç™¾åˆ†æ¯”å’Œæ•°å€¼è‡ªåŠ¨æ ¼å¼åŒ–
- **å¼‚å¸¸å¤„ç†**: å¤„ç†ç¼ºå¤±æ•°æ®å’Œå¼‚å¸¸å€¼
- **æ€§èƒ½ä¼˜åŒ–**: é«˜æ•ˆçš„æ•°æ®å¤„ç†å’Œç»˜å›¾

### æ‰©å±•æ€§
- **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªå›¾è¡¨ç‹¬ç«‹å¯è°ƒç”¨
- **å‚æ•°åŒ–**: ä¸°å¯Œçš„è‡ªå®šä¹‰å‚æ•°
- **æ’ä»¶å‹å¥½**: æ˜“äºæ·»åŠ æ–°çš„å›¾è¡¨ç±»å‹
- **æ‰¹é‡å¤„ç†**: æ”¯æŒæ‰¹é‡ç”Ÿæˆå¤šä¸ªå›¾è¡¨

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å¯¹äºæŠ•èµ„ç»ç†
1. **é‡ç‚¹å…³æ³¨**: å¤æ™®æ¯”ç‡å’Œæœ€å¤§å›æ’¤
2. **é£é™©ç®¡ç†**: ç›‘æ§VaRå’Œå›æ’¤æŒç»­æ—¶é—´
3. **å½’å› åˆ†æ**: ç†è§£è¶…é¢æ”¶ç›Šæ¥æº
4. **æƒ…æ™¯åˆ†æ**: åˆ©ç”¨è’™ç‰¹å¡æ´›ç»“æœåšé£é™©é¢„ç®—

### å¯¹äºé£é™©ç®¡ç†
1. **é™é¢ç›‘æ§**: è®¾ç½®VaRå’Œå›æ’¤é™é¢
2. **å‹åŠ›æµ‹è¯•**: å…³æ³¨æç«¯æƒ…å†µä¸‹çš„è¡¨ç°
3. **ç›¸å…³æ€§åˆ†æ**: ç›‘æ§æ»šåŠ¨ç›¸å…³æ€§å˜åŒ–
4. **æµåŠ¨æ€§é£é™©**: ç»“åˆæŒä»“é›†ä¸­åº¦åˆ†æ

### å¯¹äºå®¢æˆ·æŠ¥å‘Š
1. **ç®€åŒ–å±•ç¤º**: ä½¿ç”¨ä»ªè¡¨æ¿å’Œé¥¼å›¾
2. **å¯¹æ¯”åˆ†æ**: çªå‡ºç›¸å¯¹åŸºå‡†çš„è¡¨ç°
3. **é£é™©è§£é‡Š**: ç”¨ç›´è§‚å›¾è¡¨è§£é‡Šé£é™©æ¦‚å¿µ
4. **å®šæœŸæ›´æ–°**: å»ºç«‹å®šæœŸæŠ¥å‘Šæœºåˆ¶

## ğŸ”„ é›†æˆå»ºè®®

### ä¸å›æµ‹å¼•æ“é›†æˆ
```python
# åœ¨å›æµ‹å®Œæˆåè‡ªåŠ¨ç”Ÿæˆå›¾è¡¨
def run_backtest_with_charts(strategy, data):
    # è¿è¡Œå›æµ‹
    results = run_backtest(strategy, data)
    
    # ç”Ÿæˆå¯è§†åŒ–
    visualizer = PerformanceVisualizer()
    figures = visualizer.create_comprehensive_report(results)
    
    return results, figures
```

### å®æ—¶ç›‘æ§é›†æˆ
```python
# å®šæœŸæ›´æ–°å›¾è¡¨
def update_monitoring_charts():
    current_data = get_current_portfolio_data()
    visualizer.plot_risk_metrics_dashboard(
        current_data['risk_metrics'],
        save_path=f"daily_risk_{datetime.now().strftime('%Y%m%d')}.png"
    )
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€å¸®åŠ©ï¼Œè¯·å‚è€ƒï¼š
1. `visualization_charts.py` - æ ¸å¿ƒå¯è§†åŒ–ç±»
2. `visual_example.py` - å®Œæ•´ä½¿ç”¨ç¤ºä¾‹
3. å„å›¾è¡¨çš„æ–‡æ¡£å­—ç¬¦ä¸²
4. matplotlibå’Œseabornå®˜æ–¹æ–‡æ¡£

---

**æ³¨æ„**: å½“å‰å›¾è¡¨åŸºäºæ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¯·ç¡®ä¿æ•°æ®è´¨é‡å’Œå‡†ç¡®æ€§ã€‚